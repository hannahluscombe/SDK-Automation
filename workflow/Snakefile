import pandas as pd
import yaml

configfile: "config/config.yaml"

include: "rules/sdk.smk"
include: "rules/model.smk"
include: "rules/minfin.smk"

URLS = pd.read_csv(config["scenarios"], index_col="Country_Scenario")
SCENARIOS = URLS.index.to_list() 

rule all:
    input:
        expand("results/{scenario}/results/{csv}.csv",scenario=SCENARIOS, csv=OTOOLE_FILES)

rule minfin:
    input:
        expand("results/{scenario}/MinFin/{f}.csv", scenario=SCENARIOS, f=MINFIN_FILES)

rule clean:
    shell:
        "rm -r results/*/" # ignore the .gitkeep

rule make_dag:
    shell:
        "snakemake --dag all | dot -Tpdf > dag.pdf"